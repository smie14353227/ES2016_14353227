# Lab3:DOL实例分析&编程
作者:14M2 罗逸轩 14353227
***
## 一、实验原理
#### 1、dol文件夹下examples的分析
在dol文件夹，有一个examples的文件夹，下面包含着各种运行的实例。<br>
对于每一个具体的example而言，文件夹中有一个/src的文件夹，文件夹中包含着两类文件：.c和对应的头文件.h，就是所实现的模块，构建起在.dot文件中的模块功能描述。每个模块一般要使用两个接口，xxx_init函数用于对这个函数进行初始化，而xxx_fire函数则具体定义了这个模块的功能。<br>
而文件夹中还包含另一个重要的文件exampleX.xml,这对模块之间的连接方式进行了定义。其中process在.dot中，就定义了各个模块，sw_channel定义了连接模块之间的线，connection则是具体说明了这些线需要怎样来连接模块。
#### 2、example1的代码分析
example1实现的是一个平方运算的功能。一共分为3个模块，生产者、消费者和平方模块。<br>
生产者的作用就是产生具体要进行运算的一个数值，然后通过输出端口，将这个值输出给平方模块。在到达长度的时候，即所有任务执行完毕了，就销毁模块，任务结束。<br>
平方模块首先要通过输入端口接收来自生产者的值。接收到了值以后，执行具体的运算过程i*i，得到平方，然后同样通过输出端口，将这个值最终输出给消费者。达到长度，同样销毁模块。<br>
消费者的作用一开始通过输入端口接收来自平方模块的值。接收到了值以后，就直接把值输出展示结果，达到长度后销毁模块。
#### 3、example2的代码分析
example2实现的功能较example1的功能较为复杂。在后者基础上，生产者和消费者之间经过了三个平方模块，即最后得到了i<sup>8</sup>的运算结果。而其中实现的过程，就是通过迭代的方式，循环三次来生成connection，最终便可以达到效果。
## 二、实验任务及解决
#### 1、任务一：修改example2，让3个square模块变成2个。
##### 解决方案：<br>
上面分析指出，多个平方模块是迭代而不是新建来实现的，而在xml文件中，就是通过iterator进行三次来实现了三个模块的迭代。所以在这里只需要直接将值3修改成2即可。
##### 结果：<br>
得到的运算结果如下：<p>
![pic1](https://raw.githubusercontent.com/smie14353227/ES2016_14353227/master/lab3/lab3-pic3.jpg)<p>
可以得知原来是0-19的i<sup>8</sup>结果现在变成了i<sup>4</sup>。<br>
得到的.dot图如下：<p>
![pic2](https://raw.githubusercontent.com/smie14353227/ES2016_14353227/master/lab3/lab3-pic4.jpg)<p>
现在中间的平方模块只剩下了两个。
#### 2、任务二：修改example1，使其输出3次方数。
##### 解决方案:<br>
在example1中square.c文件平方模块中，计算平方的方式就是：
```
i=i*i;
```
所以要实现3次方的运算，直接修改成：
```
i=i*i*i;
```
##### 结果：<br>
得到的运算结果如下：<p>
![pic3](https://raw.githubusercontent.com/smie14353227/ES2016_14353227/master/lab3/lab3-pic1.jpg)<p>
可以得知现在运算得到的结果为0-19的3次方。<br>
得到的.dot图如下：<p>
![pic4](https://raw.githubusercontent.com/smie14353227/ES2016_14353227/master/lab3/lab3-pic2.jpg)<p>
## 三、感想心得
这次实验实现其实并不难。依照ppt的提示，最后也只是改了两行代码。关键在于跟着ppt的分析思路，认识了了dol下example的实例具体的运行和框架，这对于接下来的实验的进行和分析还是有很大帮助的。并且通过总结，回顾了markdown的语法，更加地熟练使用其进行文本书写。
### 参考资料
[1]SDCS of SYSU 2014级移动信息工程 嵌入式系统实验课指导文档 Lab3-DOL实例分析&编程.pdf<br>
[2]http://www.jianshu.com/p/1e402922ee32/ Markdown——入门指南<br>
[3]http://www.appinn.com/markdown/#p Markdown 语法说明 (简体中文版)
